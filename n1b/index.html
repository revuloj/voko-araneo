<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Reta Vortaro - Serĉo</title>
<!--        <link rel="icon" type="image/png" href="images/favicon.png"> -->
        <link rel="SHORTCUT ICON" href="stl/revo.png">
        <link rel="stylesheet" href="stl/normalize.css">
        <link rel="stylesheet" href="stl/revo-n1b.css">
        <!-- link rel="stylesheet" href="stl/artikolo.css" -->

        <script
        src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>

        <script
			  src="https://code.jquery.com/jquery-3.5.1.min.js"
			  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
              crossorigin="anonymous"></script>

        <script
            src="jsc/revo-art.js"></script>
              
        <script>
            // vd. https://wiki.selfhtml.org/wiki/HTML/Tutorials/Navigation/Dropdown-Men%C3%BC
            function nav_toggle() {
                var menu = document.getElementById("navigado");
                /*
                if (menu.style.zIndex >- 1) {
                    menu.style.zIndex = -1;
                    menu.style.font = "0/0 serif";
                } else {
                    menu.style.zIndex = 100;
                    menu.style.font = "";   
                    menu.style.width = 300;                 
                }*/
                if (menu.style.display == "") {
                    menu.style.display = "block"
                } else {
                    menu.style.display = ""
                }

            }

            function load_inx(ev) {
                var elm = $(ev.target);
                if (elm.is("b")) elm = elm.parent();
                var href = elm.attr("href");
                var trg = elm.attr("target");
                if (! href.startsWith('#')) {
                    ev.preventDefault();
                    if ( href_external(href) ) {
                        window.open(href);
                    } else if (trg == "precipa") {
                        if (href.startsWith('../')) href = '/revo/' + href.substr(3);
                        $('#s_artikolo').load(href, //+' body>*'                            
                            preparu_art
                        );                        
                    } else {                        
                        if (href[0] != '/' && ! href.startsWith('http')) href = '/revo/inx/'+href;
                        $('#navigado').load(href+' table');
                    }
                }
            }

            function load_art(ev) {
                var elm = $(ev.target);
                //if (elm.is("b")) elm = elm.parent();
                var href = elm.attr("href");
                var trg = elm.attr("target");
                if (! href.startsWith('#')) {
                    ev.preventDefault();

                    if ( href_external(href) ) {
                        window.open(href);
                    } else if (trg == "indekso") {
                        if (href.startsWith('../')) href = '/revo/' + href.substr(3);
                        $('#navigado').load(href+' table');                        
                    } else {                        
                        if (href[0] != '/' && ! href.startsWith('http')) href = '/revo/art/'+href;
                        $('#s_artikolo').load(href); //+' body>*');
                    }
                }
            }

            function href_external(href) {
                var revo_url = "reta-vortaro.de";
                return (
                    href.startsWith('http://') && href.substring('http://'.length-1,revo_url.length) != revo_url
                    || href.startsWith('https://') && href.substring('https://'.length-1,revo_url.length) != revo_url
                );
            }

            function serchu(event) {
                event.preventDefault();
                
                $.getJSON("/cgi-bin/sercxu-json.pl",
                    { 
                        sercxata: $("#serchteksto").val() 
                    })
                .done(function(data) {
                    //alert( "Data Loaded: " + data );
                    for (tr of data) {
                        cosole.log(tr);
                    }
                });
            }

            // preparu la paĝon: evento-reagoj...
            $(function() { 
                $('#navigado').load('/revo/inx/_eo.html table');
                $('#navigado').click(load_inx);
                $('#s_artikolo').click(load_art);
                $("#sercho_frm").submit(serchu);
                })

        </script>
    </head>
    <body>

<nav>
    <div class="nav_btn" onclick="nav_toggle()"><a href="#navigado">&#x2630;</a></div>
    <div id="navigado"></div>
</nav>

<main> 
        
    <header>
        <div class="R cirklo">R</div>
        <div class="E cirklo">E</div>
        <div class="V cirklo">V</div>
        <div class="O cirklo">O</div>
    </header>

    <section id="s_artikolo">
    </section>
    <section id="s_sercho">
        <form role="search" id="sercho_frm">
            <input type="text" size="50" id="serchteksto" name="sercho" 
                placeholder="Tajpu kion vi serĉas; cx=ĉ, cxx=cx, ĵokeroj: _=iu, %=iuj"></input>
            <input type="submit" id="sercho_btn" value="Ek!" class="button"></input>
            <div>
                indeksoj | helpo | ktp.  
            </div>
        </form>
        <div id="trovoj">

            <table id="alfabete">
                <colgroup><col id="lng"/><col/></colgroup>
                <tr>
                    <td>eo</td><td><a href="/revo/art/insul.html#insul.0o"
                        >insulo</a></td>
                </tr>
                <tr>
                    <td>de</td><td>Insel</td>
                </tr>
                <tr>
                    <td>en</td><td>island</td>
                </tr>
            </table>

            <table id="kategorie">
                <colgroup><col id="kat"/><col/></colgroup>
                <tr>
                    <td>GEOG</td><td>geografio (fako)</td>
                </tr>
                <tr>
                    <td>LST</td><td>insuloj (listo)</td>
                </tr>
                <tr>
                    <td>VID</td><td><a href="/revo/art/atol.html#atol0o">atolo</a></td>
                </tr>
                <tr>
                    <td>DRV</td><td><a href="/revo/art/insul.html#insul.duon0o">duoninsulo</a></td>
                </tr>
            </table>

        </div>
    </section>

    <footer>
        .. | datumprotekto | permeso | projekto 
    </footer>
</main>

    </body>
</html>